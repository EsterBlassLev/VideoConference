{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../ParticipantService\";\nimport * as i2 from \"@angular/common\";\nconst _c0 = [\"video\"];\nconst _c1 = [\"class\", \"component\"];\n\nfunction ParticipantListComponent_li_1_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_1_button_11_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const judge_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.displayScreen(judge_r2);\n    });\n    i0.ɵɵtext(1, \"Display Screen\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ParticipantListComponent_li_1_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_1_button_12_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const judge_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.stopDisplay(judge_r2);\n    });\n    i0.ɵɵtext(1, \"Stop Display\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ParticipantListComponent_li_1_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_1_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return ctx_r13.startScreenRecording();\n    });\n    i0.ɵɵtext(1, \"Screen recording\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ParticipantListComponent_li_1_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_1_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return ctx_r15.stopScreenRecording();\n    });\n    i0.ɵɵtext(1, \"Stop Screen recording \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ParticipantListComponent_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5)(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_1_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const judge_r2 = restoredCtx.$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.toggleCamera(judge_r2);\n    });\n    i0.ɵɵtext(10, \"open camera \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, ParticipantListComponent_li_1_button_11_Template, 2, 0, \"button\", 8);\n    i0.ɵɵtemplate(12, ParticipantListComponent_li_1_button_12_Template, 2, 0, \"button\", 8);\n    i0.ɵɵtemplate(13, ParticipantListComponent_li_1_button_13_Template, 2, 0, \"button\", 8);\n    i0.ɵɵtemplate(14, ParticipantListComponent_li_1_button_14_Template, 2, 0, \"button\", 8);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const judge_r2 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\" \", judge_r2.firstName, \" \", judge_r2.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", judge_r2.job, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !judge_r2.sharedScreen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", judge_r2.sharedScreen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !judge_r2.recording);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", judge_r2.recording);\n  }\n}\n\nfunction ParticipantListComponent_li_5_i_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 11);\n  }\n}\n\nfunction ParticipantListComponent_li_5_i_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"i\", 12);\n  }\n}\n\nfunction ParticipantListComponent_li_5_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_5_button_13_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const other_r19 = i0.ɵɵnextContext().$implicit;\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.displayScreen(other_r19);\n    });\n    i0.ɵɵtext(1, \"Display Screen\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ParticipantListComponent_li_5_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_5_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const other_r19 = i0.ɵɵnextContext().$implicit;\n      const ctx_r29 = i0.ɵɵnextContext();\n      return ctx_r29.stopDisplay(other_r19);\n    });\n    i0.ɵɵtext(1, \"Stop Display\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ParticipantListComponent_li_5_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_5_button_15_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return ctx_r32.startScreenRecording();\n    });\n    i0.ɵɵtext(1, \"Screen recording\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ParticipantListComponent_li_5_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r35 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_5_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r35);\n      const ctx_r34 = i0.ɵɵnextContext(2);\n      return ctx_r34.stopScreenRecording();\n    });\n    i0.ɵɵtext(1, \"Stop Screen recording \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ParticipantListComponent_li_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r37 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5)(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 6)(9, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ParticipantListComponent_li_5_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r37);\n      const other_r19 = restoredCtx.$implicit;\n      const ctx_r36 = i0.ɵɵnextContext();\n      return ctx_r36.toggleCamera(other_r19);\n    });\n    i0.ɵɵtext(10, \"open camera \");\n    i0.ɵɵtemplate(11, ParticipantListComponent_li_5_i_11_Template, 1, 0, \"i\", 9);\n    i0.ɵɵtemplate(12, ParticipantListComponent_li_5_i_12_Template, 1, 0, \"i\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, ParticipantListComponent_li_5_button_13_Template, 2, 0, \"button\", 8);\n    i0.ɵɵtemplate(14, ParticipantListComponent_li_5_button_14_Template, 2, 0, \"button\", 8);\n    i0.ɵɵtemplate(15, ParticipantListComponent_li_5_button_15_Template, 2, 0, \"button\", 8);\n    i0.ɵɵtemplate(16, ParticipantListComponent_li_5_button_16_Template, 2, 0, \"button\", 8);\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const other_r19 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\" \", other_r19.firstName, \" \", other_r19.lastName, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", other_r19.job, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", other_r19.video);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !other_r19.video);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !other_r19.sharedScreen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", other_r19.sharedScreen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !other_r19.sharedScreen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", other_r19.sharedScreen);\n  }\n}\n\nexport let ParticipantListComponent = /*#__PURE__*/(() => {\n  class ParticipantListComponent {\n    constructor(_participantService, _cdr) {\n      this._participantService = _participantService;\n      this._cdr = _cdr;\n      this.participantsjudge = [];\n      this.participantsOthers = [];\n      this.recordedChunks = [];\n    }\n\n    ngOnInit() {\n      // this.subscribtion=this._participantService.getAllParticipants().subscribe(data=>{\n      //   this.participants=data;\n      //   this._cdr.detectChanges();\n      // })\n      this.participantsjudge = this._participantService.getAllParticipantsjudge();\n      this.participantsOthers = this._participantService.getAllParticipantsOthers();\n      this.videoElement = document.getElementById('videoElement');\n    }\n\n    toggleCamera() {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (this.cameraStream) {\n          this.cameraStream.getTracks().forEach(track => track.stop());\n          this.videoElement.srcObject = null;\n          this.cameraStream = undefined;\n        } else {\n          navigator.mediaDevices.getUserMedia({\n            video: true\n          }).then(stream => {\n            this.videoElement.srcObject = stream;\n            this.cameraStream = stream;\n          }).catch(error => {\n            console.log('Error accessing camera:', error);\n          });\n        }\n      });\n    }\n\n    displayScreen(part) {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          this.screenStream = yield navigator.mediaDevices.getDisplayMedia({\n            video: true\n          });\n          this.videoElement.srcObject = this.screenStream;\n        } catch (error) {\n          console.error('Error displaying screen:', error);\n        }\n\n        part.sharedScreen = !part.sharedScreen;\n      });\n    }\n\n    stopDisplay(part) {\n      part.sharedScreen = !part.sharedScreen;\n\n      if (this.screenStream) {\n        this.screenStream.getTracks().forEach(track => track.stop());\n        this.videoElement.srcObject = null;\n        this.screenStream = null;\n      }\n    }\n\n    startScreenRecording(part) {\n      return __awaiter(this, void 0, void 0, function* () {\n        try {\n          this.screenStream = yield navigator.mediaDevices.getDisplayMedia({\n            video: true\n          });\n          this.mediaRecorder = new MediaRecorder(this.screenStream);\n\n          this.mediaRecorder.ondataavailable = event => {\n            if (event.data.size > 0) {\n              this.recordedChunks.push(event.data);\n            }\n          };\n\n          this.mediaRecorder.start();\n          part.recording = !part.recording;\n        } catch (error) {\n          console.error('Error starting screen recording:', error);\n        } // part.recording =!part.recording;\n\n      });\n    }\n\n    stopScreenRecording(part) {\n      // part.recording=!part.recording;\n      if (this.mediaRecorder && this.mediaRecorder.state !== 'inactive') {\n        this.mediaRecorder.stop();\n      }\n\n      this.downloadRecording();\n    }\n\n    downloadRecording() {\n      const blob = new Blob(this.recordedChunks, {\n        type: 'video/webm'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      document.body.appendChild(a);\n      a.style.display = 'none';\n      a.href = url;\n      a.download = 'screen-recording.webm';\n      a.click();\n      window.URL.revokeObjectURL(url);\n    }\n\n  }\n\n  ParticipantListComponent.ɵfac = function ParticipantListComponent_Factory(t) {\n    return new (t || ParticipantListComponent)(i0.ɵɵdirectiveInject(i1.ParticipantService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n\n  ParticipantListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ParticipantListComponent,\n    selectors: [[\"app-participant-list\", 8, \"component\"]],\n    viewQuery: function ParticipantListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.video = _t.first);\n      }\n    },\n    attrs: _c1,\n    decls: 6,\n    vars: 2,\n    consts: [[1, \"list-group\", \"participant-list\"], [\"class\", \"list-group-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\"], [1, \"row\", \"participant-card\"], [1, \"col-4\"], [1, \"colorDetails\"], [1, \"button-list\"], [3, \"click\"], [3, \"click\", 4, \"ngIf\"], [\"class\", \"fa fa-video-camera\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"class\", \"fa fa-video-camera-slash\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-video-camera\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-video-camera-slash\"]],\n    template: function ParticipantListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ul\", 0);\n        i0.ɵɵtemplate(1, ParticipantListComponent_li_1_Template, 15, 7, \"li\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(2, \"br\")(3, \"br\");\n        i0.ɵɵelementStart(4, \"ul\", 0);\n        i0.ɵɵtemplate(5, ParticipantListComponent_li_5_Template, 17, 9, \"li\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.participantsjudge);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.participantsOthers);\n      }\n    },\n    directives: [i2.NgForOf, i2.NgIf],\n    styles: [\".participant-list[_ngcontent-%COMP%]{display:flex;gap:20px;justify-content:center;flex-direction:row}.colorDetails[_ngcontent-%COMP%]{background-color:#fff;padding:auto;margin:auto;border-radius:20px;text-align:center}.button-list[_ngcontent-%COMP%]{display:flex;grid-gap:20px;gap:20px}.participant-card[_ngcontent-%COMP%]{background-image:url(men.jpeg);background-repeat:no-repeat;background-size:cover;padding:30px;border-radius:5px}@media screen and (max-width: 768px){.participant-list[_ngcontent-%COMP%]{grid-template-columns:1fr}}button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;background-color:#3498db;color:#fff;font-size:16px;text-align:center;border:none;border-radius:5px;cursor:pointer}@media only screen and (max-width: 768px){button[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px}}@media only screen and (max-width: 480px){button[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}}\"]\n  });\n  return ParticipantListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}